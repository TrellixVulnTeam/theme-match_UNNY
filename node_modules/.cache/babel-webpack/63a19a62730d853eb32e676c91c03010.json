{"ast":null,"code":"import _slicedToArray from \"/home/alicia/dev/angular/theme-picker/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _classCallCheck from \"/home/alicia/dev/angular/theme-picker/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport * as i0 from '@angular/core';\nimport { InjectionToken, Injectable, Inject, Optional, PLATFORM_ID, NgZone, NgModule } from '@angular/core';\nimport { Subject, of, Observable, from, merge } from 'rxjs';\nimport { observeOn, switchMap, map, shareReplay, first, switchMapTo, subscribeOn, filter } from 'rxjs/operators';\nimport * as i1 from '@angular/fire';\nimport { ɵAngularFireSchedulers, ɵkeepUnstableUntilFirstFactory, ɵfirebaseAppFactory, ɵfetchInstance, ɵlazySDKProxy, FIREBASE_OPTIONS, FIREBASE_APP_NAME, ɵapplyMixins } from '@angular/fire';\nimport { isPlatformServer } from '@angular/common';\nimport * as ɵngcc0 from '@angular/core';\nvar proxyPolyfillCompat = {\n  app: null,\n  applyActionCode: null,\n  checkActionCode: null,\n  confirmPasswordReset: null,\n  createUserWithEmailAndPassword: null,\n  currentUser: null,\n  fetchSignInMethodsForEmail: null,\n  isSignInWithEmailLink: null,\n  getRedirectResult: null,\n  languageCode: null,\n  settings: null,\n  onAuthStateChanged: null,\n  onIdTokenChanged: null,\n  sendSignInLinkToEmail: null,\n  sendPasswordResetEmail: null,\n  setPersistence: null,\n  signInAndRetrieveDataWithCredential: null,\n  signInAnonymously: null,\n  signInWithCredential: null,\n  signInWithCustomToken: null,\n  signInWithEmailAndPassword: null,\n  signInWithPhoneNumber: null,\n  signInWithEmailLink: null,\n  signInWithPopup: null,\n  signInWithRedirect: null,\n  signOut: null,\n  tenantId: null,\n  updateCurrentUser: null,\n  useDeviceLanguage: null,\n  useEmulator: null,\n  verifyPasswordResetCode: null\n};\nvar USE_EMULATOR = new InjectionToken('angularfire2.auth.use-emulator');\nvar SETTINGS = new InjectionToken('angularfire2.auth.settings');\nvar TENANT_ID = new InjectionToken('angularfire2.auth.tenant-id');\nvar LANGUAGE_CODE = new InjectionToken('angularfire2.auth.langugage-code');\nvar USE_DEVICE_LANGUAGE = new InjectionToken('angularfire2.auth.use-device-language');\nvar PERSISTENCE = new InjectionToken('angularfire.auth.persistence');\n\nvar AngularFireAuth = function AngularFireAuth(options, nameOrConfig, // tslint:disable-next-line:ban-types\nplatformId, zone, _useEmulator, // can't use the tuple here\n_settings, // can't use firebase.auth.AuthSettings here\ntenantId, languageCode, useDeviceLanguage, persistence) {\n  _classCallCheck(this, AngularFireAuth);\n\n  var schedulers = new ɵAngularFireSchedulers(zone);\n  var keepUnstableUntilFirst = ɵkeepUnstableUntilFirstFactory(schedulers);\n  var logins = new Subject();\n  var auth = of(undefined).pipe(observeOn(schedulers.outsideAngular), switchMap(function () {\n    return zone.runOutsideAngular(function () {\n      return import('firebase/auth');\n    });\n  }), map(function () {\n    return ɵfirebaseAppFactory(options, zone, nameOrConfig);\n  }), map(function (app) {\n    return zone.runOutsideAngular(function () {\n      var useEmulator = _useEmulator;\n      var settings = _settings;\n      return ɵfetchInstance(\"\".concat(app.name, \".auth\"), 'AngularFireAuth', app, function () {\n        var auth = zone.runOutsideAngular(function () {\n          return app.auth();\n        });\n\n        if (useEmulator) {\n          // Firebase Auth doesn't conform to the useEmulator convention, let's smooth that over\n          auth.useEmulator(\"http://\".concat(useEmulator.join(':')));\n        }\n\n        if (tenantId) {\n          auth.tenantId = tenantId;\n        }\n\n        auth.languageCode = languageCode;\n\n        if (useDeviceLanguage) {\n          auth.useDeviceLanguage();\n        }\n\n        if (settings) {\n          for (var _i = 0, _Object$entries = Object.entries(settings); _i < _Object$entries.length; _i++) {\n            var _Object$entries$_i = _slicedToArray(_Object$entries[_i], 2),\n                k = _Object$entries$_i[0],\n                v = _Object$entries$_i[1];\n\n            auth.settings[k] = v;\n          }\n        }\n\n        if (persistence) {\n          auth.setPersistence(persistence);\n        }\n\n        return auth;\n      }, [useEmulator, tenantId, languageCode, useDeviceLanguage, settings, persistence]);\n    });\n  }), shareReplay({\n    bufferSize: 1,\n    refCount: false\n  }));\n\n  if (isPlatformServer(platformId)) {\n    this.authState = this.user = this.idToken = this.idTokenResult = this.credential = of(null);\n  } else {\n    // HACK, as we're exporting auth.Auth, rather than auth, developers importing firebase.auth\n    //       (e.g, `import { auth } from 'firebase/app'`) are getting an undefined auth object unexpectedly\n    //       as we're completely lazy. Let's eagerly load the Auth SDK here.\n    //       There could potentially be race conditions still... but this greatly decreases the odds while\n    //       we reevaluate the API.\n    var _ = auth.pipe(first()).subscribe();\n\n    var redirectResult = auth.pipe(switchMap(function (auth) {\n      return auth.getRedirectResult().then(function (it) {\n        return it;\n      }, function () {\n        return null;\n      });\n    }), keepUnstableUntilFirst, shareReplay({\n      bufferSize: 1,\n      refCount: false\n    }));\n\n    var fromCallback = function fromCallback(cb) {\n      return new Observable(function (subscriber) {\n        return {\n          unsubscribe: zone.runOutsideAngular(function () {\n            return cb(subscriber);\n          })\n        };\n      });\n    };\n\n    var authStateChanged = auth.pipe(switchMap(function (auth) {\n      return fromCallback(auth.onAuthStateChanged.bind(auth));\n    }));\n    var idTokenChanged = auth.pipe(switchMap(function (auth) {\n      return fromCallback(auth.onIdTokenChanged.bind(auth));\n    }));\n    this.authState = redirectResult.pipe(switchMapTo(authStateChanged), subscribeOn(schedulers.outsideAngular), observeOn(schedulers.insideAngular));\n    this.user = redirectResult.pipe(switchMapTo(idTokenChanged), subscribeOn(schedulers.outsideAngular), observeOn(schedulers.insideAngular));\n    this.idToken = this.user.pipe(switchMap(function (user) {\n      return user ? from(user.getIdToken()) : of(null);\n    }));\n    this.idTokenResult = this.user.pipe(switchMap(function (user) {\n      return user ? from(user.getIdTokenResult()) : of(null);\n    }));\n    this.credential = merge(redirectResult, logins, // pipe in null authState to make credential zipable, just a weird devexp if\n    // authState and user go null to still have a credential\n    this.authState.pipe(filter(function (it) {\n      return !it;\n    }))).pipe( // handle the { user: { } } when a user is already logged in, rather have null\n    // TODO handle the type corcersion better\n    map(function (credential) {\n      return (credential === null || credential === void 0 ? void 0 : credential.user) ? credential : null;\n    }), subscribeOn(schedulers.outsideAngular), observeOn(schedulers.insideAngular));\n  }\n\n  return ɵlazySDKProxy(this, auth, zone, {\n    spy: {\n      apply: function apply(name, _, val) {\n        // If they call a signIn or createUser function listen into the promise\n        // this will give us the user credential, push onto the logins Subject\n        // to be consumed in .credential\n        if (name.startsWith('signIn') || name.startsWith('createUser')) {\n          // TODO fix the types, the trouble is UserCredential has everything optional\n          val.then(function (user) {\n            return logins.next(user);\n          });\n        }\n      }\n    }\n  });\n};\n\nAngularFireAuth.ɵfac = function AngularFireAuth_Factory(t) {\n  return new (t || AngularFireAuth)(ɵngcc0.ɵɵinject(FIREBASE_OPTIONS), ɵngcc0.ɵɵinject(FIREBASE_APP_NAME, 8), ɵngcc0.ɵɵinject(PLATFORM_ID), ɵngcc0.ɵɵinject(ɵngcc0.NgZone), ɵngcc0.ɵɵinject(USE_EMULATOR, 8), ɵngcc0.ɵɵinject(SETTINGS, 8), ɵngcc0.ɵɵinject(TENANT_ID, 8), ɵngcc0.ɵɵinject(LANGUAGE_CODE, 8), ɵngcc0.ɵɵinject(USE_DEVICE_LANGUAGE, 8), ɵngcc0.ɵɵinject(PERSISTENCE, 8));\n};\n/** @nocollapse */\n\n\nAngularFireAuth.ɵprov = i0.ɵɵdefineInjectable({\n  factory: function AngularFireAuth_Factory() {\n    return new AngularFireAuth(i0.ɵɵinject(i1.FIREBASE_OPTIONS), i0.ɵɵinject(i1.FIREBASE_APP_NAME, 8), i0.ɵɵinject(i0.PLATFORM_ID), i0.ɵɵinject(i0.NgZone), i0.ɵɵinject(USE_EMULATOR, 8), i0.ɵɵinject(SETTINGS, 8), i0.ɵɵinject(TENANT_ID, 8), i0.ɵɵinject(LANGUAGE_CODE, 8), i0.ɵɵinject(USE_DEVICE_LANGUAGE, 8), i0.ɵɵinject(PERSISTENCE, 8));\n  },\n  token: AngularFireAuth,\n  providedIn: \"any\"\n});\n/** @nocollapse */\n\nAngularFireAuth.ctorParameters = function () {\n  return [{\n    type: undefined,\n    decorators: [{\n      type: Inject,\n      args: [FIREBASE_OPTIONS]\n    }]\n  }, {\n    type: undefined,\n    decorators: [{\n      type: Optional\n    }, {\n      type: Inject,\n      args: [FIREBASE_APP_NAME]\n    }]\n  }, {\n    type: Object,\n    decorators: [{\n      type: Inject,\n      args: [PLATFORM_ID]\n    }]\n  }, {\n    type: NgZone\n  }, {\n    type: undefined,\n    decorators: [{\n      type: Optional\n    }, {\n      type: Inject,\n      args: [USE_EMULATOR]\n    }]\n  }, {\n    type: undefined,\n    decorators: [{\n      type: Optional\n    }, {\n      type: Inject,\n      args: [SETTINGS]\n    }]\n  }, {\n    type: String,\n    decorators: [{\n      type: Optional\n    }, {\n      type: Inject,\n      args: [TENANT_ID]\n    }]\n  }, {\n    type: String,\n    decorators: [{\n      type: Optional\n    }, {\n      type: Inject,\n      args: [LANGUAGE_CODE]\n    }]\n  }, {\n    type: Boolean,\n    decorators: [{\n      type: Optional\n    }, {\n      type: Inject,\n      args: [USE_DEVICE_LANGUAGE]\n    }]\n  }, {\n    type: String,\n    decorators: [{\n      type: Optional\n    }, {\n      type: Inject,\n      args: [PERSISTENCE]\n    }]\n  }];\n};\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(AngularFireAuth, [{\n    type: Injectable,\n    args: [{\n      providedIn: 'any'\n    }]\n  }], function () {\n    return [{\n      type: undefined,\n      decorators: [{\n        type: Inject,\n        args: [FIREBASE_OPTIONS]\n      }]\n    }, {\n      type: undefined,\n      decorators: [{\n        type: Optional\n      }, {\n        type: Inject,\n        args: [FIREBASE_APP_NAME]\n      }]\n    }, {\n      type: Object,\n      decorators: [{\n        type: Inject,\n        args: [PLATFORM_ID]\n      }]\n    }, {\n      type: ɵngcc0.NgZone\n    }, {\n      type: undefined,\n      decorators: [{\n        type: Optional\n      }, {\n        type: Inject,\n        args: [USE_EMULATOR]\n      }]\n    }, {\n      type: undefined,\n      decorators: [{\n        type: Optional\n      }, {\n        type: Inject,\n        args: [SETTINGS]\n      }]\n    }, {\n      type: String,\n      decorators: [{\n        type: Optional\n      }, {\n        type: Inject,\n        args: [TENANT_ID]\n      }]\n    }, {\n      type: String,\n      decorators: [{\n        type: Optional\n      }, {\n        type: Inject,\n        args: [LANGUAGE_CODE]\n      }]\n    }, {\n      type: Boolean,\n      decorators: [{\n        type: Optional\n      }, {\n        type: Inject,\n        args: [USE_DEVICE_LANGUAGE]\n      }]\n    }, {\n      type: String,\n      decorators: [{\n        type: Optional\n      }, {\n        type: Inject,\n        args: [PERSISTENCE]\n      }]\n    }];\n  }, null);\n})();\n\nɵapplyMixins(AngularFireAuth, [proxyPolyfillCompat]);\n\nvar AngularFireAuthModule = function AngularFireAuthModule() {\n  _classCallCheck(this, AngularFireAuthModule);\n};\n\nAngularFireAuthModule.ɵfac = function AngularFireAuthModule_Factory(t) {\n  return new (t || AngularFireAuthModule)();\n};\n\nAngularFireAuthModule.ɵmod = /*@__PURE__*/ɵngcc0.ɵɵdefineNgModule({\n  type: AngularFireAuthModule\n});\nAngularFireAuthModule.ɵinj = /*@__PURE__*/ɵngcc0.ɵɵdefineInjector({\n  providers: [AngularFireAuth]\n});\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(AngularFireAuthModule, [{\n    type: NgModule,\n    args: [{\n      providers: [AngularFireAuth]\n    }]\n  }], null, null);\n})();\n/**\n * Generated bundle index. Do not edit.\n */\n\n\nexport { AngularFireAuth, AngularFireAuthModule, LANGUAGE_CODE, PERSISTENCE, SETTINGS, TENANT_ID, USE_DEVICE_LANGUAGE, USE_EMULATOR }; //# sourceMappingURL=angular-fire-auth.js.map","map":{"version":3,"sources":["/home/alicia/dev/angular/theme-picker/node_modules/@angular/fire/__ivy_ngcc__/fesm2015/angular-fire-auth.js"],"names":["i0","InjectionToken","Injectable","Inject","Optional","PLATFORM_ID","NgZone","NgModule","Subject","of","Observable","from","merge","observeOn","switchMap","map","shareReplay","first","switchMapTo","subscribeOn","filter","i1","ɵAngularFireSchedulers","ɵkeepUnstableUntilFirstFactory","ɵfirebaseAppFactory","ɵfetchInstance","ɵlazySDKProxy","FIREBASE_OPTIONS","FIREBASE_APP_NAME","ɵapplyMixins","isPlatformServer","ɵngcc0","proxyPolyfillCompat","app","applyActionCode","checkActionCode","confirmPasswordReset","createUserWithEmailAndPassword","currentUser","fetchSignInMethodsForEmail","isSignInWithEmailLink","getRedirectResult","languageCode","settings","onAuthStateChanged","onIdTokenChanged","sendSignInLinkToEmail","sendPasswordResetEmail","setPersistence","signInAndRetrieveDataWithCredential","signInAnonymously","signInWithCredential","signInWithCustomToken","signInWithEmailAndPassword","signInWithPhoneNumber","signInWithEmailLink","signInWithPopup","signInWithRedirect","signOut","tenantId","updateCurrentUser","useDeviceLanguage","useEmulator","verifyPasswordResetCode","USE_EMULATOR","SETTINGS","TENANT_ID","LANGUAGE_CODE","USE_DEVICE_LANGUAGE","PERSISTENCE","AngularFireAuth","options","nameOrConfig","platformId","zone","_useEmulator","_settings","persistence","schedulers","keepUnstableUntilFirst","logins","auth","undefined","pipe","outsideAngular","runOutsideAngular","name","join","Object","entries","k","v","bufferSize","refCount","authState","user","idToken","idTokenResult","credential","_","subscribe","redirectResult","then","it","fromCallback","cb","subscriber","unsubscribe","authStateChanged","bind","idTokenChanged","insideAngular","getIdToken","getIdTokenResult","spy","apply","val","startsWith","next","ɵfac","AngularFireAuth_Factory","t","ɵɵinject","ɵprov","ɵɵdefineInjectable","factory","token","providedIn","ctorParameters","type","decorators","args","String","Boolean","ngDevMode","ɵsetClassMetadata","AngularFireAuthModule","AngularFireAuthModule_Factory","ɵmod","ɵɵdefineNgModule","ɵinj","ɵɵdefineInjector","providers"],"mappings":"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","sourcesContent":["\nimport * as i0 from '@angular/core';\nimport { InjectionToken, Injectable, Inject, Optional, PLATFORM_ID, NgZone, NgModule } from '@angular/core';\nimport { Subject, of, Observable, from, merge } from 'rxjs';\nimport { observeOn, switchMap, map, shareReplay, first, switchMapTo, subscribeOn, filter } from 'rxjs/operators';\nimport * as i1 from '@angular/fire';\nimport { ɵAngularFireSchedulers, ɵkeepUnstableUntilFirstFactory, ɵfirebaseAppFactory, ɵfetchInstance, ɵlazySDKProxy, FIREBASE_OPTIONS, FIREBASE_APP_NAME, ɵapplyMixins } from '@angular/fire';\nimport { isPlatformServer } from '@angular/common';\n\nimport * as ɵngcc0 from '@angular/core';\nconst proxyPolyfillCompat = {\n    app: null,\n    applyActionCode: null,\n    checkActionCode: null,\n    confirmPasswordReset: null,\n    createUserWithEmailAndPassword: null,\n    currentUser: null,\n    fetchSignInMethodsForEmail: null,\n    isSignInWithEmailLink: null,\n    getRedirectResult: null,\n    languageCode: null,\n    settings: null,\n    onAuthStateChanged: null,\n    onIdTokenChanged: null,\n    sendSignInLinkToEmail: null,\n    sendPasswordResetEmail: null,\n    setPersistence: null,\n    signInAndRetrieveDataWithCredential: null,\n    signInAnonymously: null,\n    signInWithCredential: null,\n    signInWithCustomToken: null,\n    signInWithEmailAndPassword: null,\n    signInWithPhoneNumber: null,\n    signInWithEmailLink: null,\n    signInWithPopup: null,\n    signInWithRedirect: null,\n    signOut: null,\n    tenantId: null,\n    updateCurrentUser: null,\n    useDeviceLanguage: null,\n    useEmulator: null,\n    verifyPasswordResetCode: null,\n};\n\nconst USE_EMULATOR = new InjectionToken('angularfire2.auth.use-emulator');\nconst SETTINGS = new InjectionToken('angularfire2.auth.settings');\nconst TENANT_ID = new InjectionToken('angularfire2.auth.tenant-id');\nconst LANGUAGE_CODE = new InjectionToken('angularfire2.auth.langugage-code');\nconst USE_DEVICE_LANGUAGE = new InjectionToken('angularfire2.auth.use-device-language');\nconst PERSISTENCE = new InjectionToken('angularfire.auth.persistence');\nclass AngularFireAuth {\n    constructor(options, nameOrConfig, \n    // tslint:disable-next-line:ban-types\n    platformId, zone, _useEmulator, // can't use the tuple here\n    _settings, // can't use firebase.auth.AuthSettings here\n    tenantId, languageCode, useDeviceLanguage, persistence) {\n        const schedulers = new ɵAngularFireSchedulers(zone);\n        const keepUnstableUntilFirst = ɵkeepUnstableUntilFirstFactory(schedulers);\n        const logins = new Subject();\n        const auth = of(undefined).pipe(observeOn(schedulers.outsideAngular), switchMap(() => zone.runOutsideAngular(() => import('firebase/auth'))), map(() => ɵfirebaseAppFactory(options, zone, nameOrConfig)), map(app => zone.runOutsideAngular(() => {\n            const useEmulator = _useEmulator;\n            const settings = _settings;\n            return ɵfetchInstance(`${app.name}.auth`, 'AngularFireAuth', app, () => {\n                const auth = zone.runOutsideAngular(() => app.auth());\n                if (useEmulator) {\n                    // Firebase Auth doesn't conform to the useEmulator convention, let's smooth that over\n                    auth.useEmulator(`http://${useEmulator.join(':')}`);\n                }\n                if (tenantId) {\n                    auth.tenantId = tenantId;\n                }\n                auth.languageCode = languageCode;\n                if (useDeviceLanguage) {\n                    auth.useDeviceLanguage();\n                }\n                if (settings) {\n                    for (const [k, v] of Object.entries(settings)) {\n                        auth.settings[k] = v;\n                    }\n                }\n                if (persistence) {\n                    auth.setPersistence(persistence);\n                }\n                return auth;\n            }, [useEmulator, tenantId, languageCode, useDeviceLanguage, settings, persistence]);\n        })), shareReplay({ bufferSize: 1, refCount: false }));\n        if (isPlatformServer(platformId)) {\n            this.authState = this.user = this.idToken = this.idTokenResult = this.credential = of(null);\n        }\n        else {\n            // HACK, as we're exporting auth.Auth, rather than auth, developers importing firebase.auth\n            //       (e.g, `import { auth } from 'firebase/app'`) are getting an undefined auth object unexpectedly\n            //       as we're completely lazy. Let's eagerly load the Auth SDK here.\n            //       There could potentially be race conditions still... but this greatly decreases the odds while\n            //       we reevaluate the API.\n            const _ = auth.pipe(first()).subscribe();\n            const redirectResult = auth.pipe(switchMap(auth => auth.getRedirectResult().then(it => it, () => null)), keepUnstableUntilFirst, shareReplay({ bufferSize: 1, refCount: false }));\n            const fromCallback = (cb) => new Observable(subscriber => ({ unsubscribe: zone.runOutsideAngular(() => cb(subscriber)) }));\n            const authStateChanged = auth.pipe(switchMap(auth => fromCallback(auth.onAuthStateChanged.bind(auth))));\n            const idTokenChanged = auth.pipe(switchMap(auth => fromCallback(auth.onIdTokenChanged.bind(auth))));\n            this.authState = redirectResult.pipe(switchMapTo(authStateChanged), subscribeOn(schedulers.outsideAngular), observeOn(schedulers.insideAngular));\n            this.user = redirectResult.pipe(switchMapTo(idTokenChanged), subscribeOn(schedulers.outsideAngular), observeOn(schedulers.insideAngular));\n            this.idToken = this.user.pipe(switchMap(user => user ? from(user.getIdToken()) : of(null)));\n            this.idTokenResult = this.user.pipe(switchMap(user => user ? from(user.getIdTokenResult()) : of(null)));\n            this.credential = merge(redirectResult, logins, \n            // pipe in null authState to make credential zipable, just a weird devexp if\n            // authState and user go null to still have a credential\n            this.authState.pipe(filter(it => !it))).pipe(\n            // handle the { user: { } } when a user is already logged in, rather have null\n            // TODO handle the type corcersion better\n            map(credential => (credential === null || credential === void 0 ? void 0 : credential.user) ? credential : null), subscribeOn(schedulers.outsideAngular), observeOn(schedulers.insideAngular));\n        }\n        return ɵlazySDKProxy(this, auth, zone, { spy: {\n                apply: (name, _, val) => {\n                    // If they call a signIn or createUser function listen into the promise\n                    // this will give us the user credential, push onto the logins Subject\n                    // to be consumed in .credential\n                    if (name.startsWith('signIn') || name.startsWith('createUser')) {\n                        // TODO fix the types, the trouble is UserCredential has everything optional\n                        val.then((user) => logins.next(user));\n                    }\n                }\n            } });\n    }\n}\nAngularFireAuth.ɵfac = function AngularFireAuth_Factory(t) { return new (t || AngularFireAuth)(ɵngcc0.ɵɵinject(FIREBASE_OPTIONS), ɵngcc0.ɵɵinject(FIREBASE_APP_NAME, 8), ɵngcc0.ɵɵinject(PLATFORM_ID), ɵngcc0.ɵɵinject(ɵngcc0.NgZone), ɵngcc0.ɵɵinject(USE_EMULATOR, 8), ɵngcc0.ɵɵinject(SETTINGS, 8), ɵngcc0.ɵɵinject(TENANT_ID, 8), ɵngcc0.ɵɵinject(LANGUAGE_CODE, 8), ɵngcc0.ɵɵinject(USE_DEVICE_LANGUAGE, 8), ɵngcc0.ɵɵinject(PERSISTENCE, 8)); };\n/** @nocollapse */ AngularFireAuth.ɵprov = i0.ɵɵdefineInjectable({ factory: function AngularFireAuth_Factory() { return new AngularFireAuth(i0.ɵɵinject(i1.FIREBASE_OPTIONS), i0.ɵɵinject(i1.FIREBASE_APP_NAME, 8), i0.ɵɵinject(i0.PLATFORM_ID), i0.ɵɵinject(i0.NgZone), i0.ɵɵinject(USE_EMULATOR, 8), i0.ɵɵinject(SETTINGS, 8), i0.ɵɵinject(TENANT_ID, 8), i0.ɵɵinject(LANGUAGE_CODE, 8), i0.ɵɵinject(USE_DEVICE_LANGUAGE, 8), i0.ɵɵinject(PERSISTENCE, 8)); }, token: AngularFireAuth, providedIn: \"any\" });\n/** @nocollapse */\nAngularFireAuth.ctorParameters = () => [\n    { type: undefined, decorators: [{ type: Inject, args: [FIREBASE_OPTIONS,] }] },\n    { type: undefined, decorators: [{ type: Optional }, { type: Inject, args: [FIREBASE_APP_NAME,] }] },\n    { type: Object, decorators: [{ type: Inject, args: [PLATFORM_ID,] }] },\n    { type: NgZone },\n    { type: undefined, decorators: [{ type: Optional }, { type: Inject, args: [USE_EMULATOR,] }] },\n    { type: undefined, decorators: [{ type: Optional }, { type: Inject, args: [SETTINGS,] }] },\n    { type: String, decorators: [{ type: Optional }, { type: Inject, args: [TENANT_ID,] }] },\n    { type: String, decorators: [{ type: Optional }, { type: Inject, args: [LANGUAGE_CODE,] }] },\n    { type: Boolean, decorators: [{ type: Optional }, { type: Inject, args: [USE_DEVICE_LANGUAGE,] }] },\n    { type: String, decorators: [{ type: Optional }, { type: Inject, args: [PERSISTENCE,] }] }\n];\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(AngularFireAuth, [{\n        type: Injectable,\n        args: [{\n                providedIn: 'any'\n            }]\n    }], function () { return [{ type: undefined, decorators: [{\n                type: Inject,\n                args: [FIREBASE_OPTIONS]\n            }] }, { type: undefined, decorators: [{\n                type: Optional\n            }, {\n                type: Inject,\n                args: [FIREBASE_APP_NAME]\n            }] }, { type: Object, decorators: [{\n                type: Inject,\n                args: [PLATFORM_ID]\n            }] }, { type: ɵngcc0.NgZone }, { type: undefined, decorators: [{\n                type: Optional\n            }, {\n                type: Inject,\n                args: [USE_EMULATOR]\n            }] }, { type: undefined, decorators: [{\n                type: Optional\n            }, {\n                type: Inject,\n                args: [SETTINGS]\n            }] }, { type: String, decorators: [{\n                type: Optional\n            }, {\n                type: Inject,\n                args: [TENANT_ID]\n            }] }, { type: String, decorators: [{\n                type: Optional\n            }, {\n                type: Inject,\n                args: [LANGUAGE_CODE]\n            }] }, { type: Boolean, decorators: [{\n                type: Optional\n            }, {\n                type: Inject,\n                args: [USE_DEVICE_LANGUAGE]\n            }] }, { type: String, decorators: [{\n                type: Optional\n            }, {\n                type: Inject,\n                args: [PERSISTENCE]\n            }] }]; }, null); })();\nɵapplyMixins(AngularFireAuth, [proxyPolyfillCompat]);\n\nclass AngularFireAuthModule {\n}\nAngularFireAuthModule.ɵfac = function AngularFireAuthModule_Factory(t) { return new (t || AngularFireAuthModule)(); };\nAngularFireAuthModule.ɵmod = /*@__PURE__*/ ɵngcc0.ɵɵdefineNgModule({ type: AngularFireAuthModule });\nAngularFireAuthModule.ɵinj = /*@__PURE__*/ ɵngcc0.ɵɵdefineInjector({ providers: [AngularFireAuth] });\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(AngularFireAuthModule, [{\n        type: NgModule,\n        args: [{\n                providers: [AngularFireAuth]\n            }]\n    }], null, null); })();\n\n/**\n * Generated bundle index. Do not edit.\n */\n\nexport { AngularFireAuth, AngularFireAuthModule, LANGUAGE_CODE, PERSISTENCE, SETTINGS, TENANT_ID, USE_DEVICE_LANGUAGE, USE_EMULATOR };\n\n//# sourceMappingURL=angular-fire-auth.js.map"]},"metadata":{},"sourceType":"module"}